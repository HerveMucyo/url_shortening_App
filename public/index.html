<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>URL Shortener</title>
    <link rel="stylesheet" href="styles.css">

</head>

<body>
    <h1>URL Shortener</h1>
    <form id="urlForm">
        <input type="text" id="longUrl" placeholder="Enter Long URL" required>
        <button type="submit">Shorten URL</button>
    </form>
    <p><span id="shortUrl"></span></p>

    <script>
        const urlForm = document.getElementById("urlForm");
        const longUrlInput = document.getElementById("longUrl");
        const shortUrlSpan = document.getElementById("shortUrl");

        urlForm.addEventListener("submit", async(event) => {
            event.preventDefault();

            const longUrl = longUrlInput.value;
            const response = await fetch("/api/create-short-url", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    longurl: longUrl
                })
            });

            if (response.ok) {
                const data = await response.json();
                shortUrlSpan.textContent = window.location.origin + "/" + data.shorturlid;
            } else {
                shortUrlSpan.textContent = "Error creating short URL";
            }
        });
    </script>
</body>

</html>